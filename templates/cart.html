{% extends 'base.html' %}
{% block content %}

<div class="cart-header">
    <h2>Your Shopping Cart</h2>
</div>

{% if items %}
<div class="cart-layout">
    <!-- Left Column: Items -->
    <div class="cart-items">
        {% for item in items %}
        <div class="cart-item">
            <img src="{{ item.image_url or '/static/css/images/dog-food.jpg' }}" alt="{{ item.name }}" onerror="this.src='https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400'">
            <div class="cart-item-details">
                <h4>{{ item.name }}</h4>
                <p class="category">{{ item.category }}</p>
                <p class="price">‚Çπ {{ item.price }}</p>
            </div>
            <!-- Future: Add Remove Button Here -->
        </div>
        {% endfor %}
    </div>

    <!-- Right Column: Summary -->
    <div class="cart-summary">
        <h3>Order Summary</h3>
        
        <div class="summary-row">
            <span>Subtotal ({{ items|length }} items)</span>
            <span>‚Çπ {{ total }}</span>
        </div>
        <div class="summary-row">
            <span>Shipping</span>
            <span style="color: #27ae60;">Free</span>
        </div>
        
        <div class="summary-row total">
            <span>Total</span>
            <span>‚Çπ {{ total }}</span>
        </div>

        <form action="/checkout" method="POST">
            <button type="submit" class="checkout-btn">Proceed to Checkout</button>
        </form>
        
        <a href="/clear-cart" class="clear-cart-btn">Clear Cart</a>
    </div>
</div>

{% else %}
    {% if checkout_success %}
        <div class="success-message" style="text-align: center; padding: 40px; background: #d4edda; color: #155724; border-radius: 8px;">
            <h2>Thank you for your purchase! üêæ</h2>
            <p>Your order has been placed successfully. We will ship it to you soon.</p>
            <a href="/products" class="continue-shopping-btn">Continue Shopping</a>
        </div>
    {% else %}
        <div class="cart-empty-state">
            <h3>Your Cart is Empty</h3>
            <p style="color: #7f8c8d; font-size: 1.1em; margin-bottom: 20px;">Looks like you haven't added any treats for your furry friend yet!</p>
            <img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400" alt="Empty Cart" style="border-radius: 10px; margin-bottom: 20px; max-width: 100%; height: 200px; object-fit: cover;">
            <br>
            <a href="/products" class="continue-shopping-btn">Start Shopping</a>
        </div>
    {% endif %}
{% endif %}

{% endblock %}